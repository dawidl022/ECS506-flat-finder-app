# Flat Finder Backend

## Running the server locally

### Prerequisites

You must have [Python 3](https://www.python.org/downloads/) version 3.7 or newer installed on your system

### Create a virtual environment

**Note**: the following commands work on Linux/MacOS. For Windows the commands
may differ slightly.

Inside this directory, run

```bash
python3 -m venv venv
. venv/bin/activate
```

### Installing dependencies

Inside this directory, run

```bash
pip3 install -r requirements.txt
```

### Running the server

Inside this directory, run

```bash
python3 -m flask run
```

You should see output similar to the following:

```txt
 * Debug mode: off
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
```

### Running tests

To run the application tests, run inside this directory:

```bash
python3 -m pytest
```

## Modifying OpenAPI spec

When modifying the [OpenAPI spec for the backends REST API](openapi.yaml), it
is necessary to regenerate the [client code used by the frontend](../client/src/generated/).

To do this, follow the below stops:

1. Ensure you have [node.js](https://nodejs.org/) and [npm](https://www.npmjs.com/) installed on your system
2. Navigate to the [`client`](../client/) directory from the root of this repo
3. Run `npm install` to install the required dependencies
4. Run `npm run openapi:gen` and commit the changes to the autogenerated code
